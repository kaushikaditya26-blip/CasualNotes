# Overview

This is CasualNotes.in - a web application that converts text input into visual napkin-style infographics. The application uses AI (Google Gemini) to analyze user text and generate structured JSON data, which is then rendered as hand-drawn style visualizations on an HTML5 canvas. Users can input any text content and receive a professional-looking infographic with a sketched, napkin-like aesthetic that they can download as a PNG image.

# User Preferences

Preferred communication style: Simple, everyday language.

# System Architecture

## Frontend Architecture
- **Single Page Application**: Built with vanilla HTML, CSS, and JavaScript for simplicity and fast loading
- **Canvas-based Rendering**: Uses HTML5 canvas with Rough.js library to create hand-drawn, sketchy aesthetic
- **Handwritten Typography**: Patrick Hand Google Font provides authentic napkin-like handwritten appearance
- **Visual Components**: Supports multiple visual element types (boxes, arrows, lists) with color-coded sections
- **Export Functionality**: HTML2Canvas library enables users to download generated napkins as PNG images
- **Responsive Design**: Mobile-friendly layout that adapts to different screen sizes

## Backend Architecture
- **Flask Web Framework**: Lightweight Python web server with minimal complexity
- **Single Route Design**: Main `/generate` endpoint processes text input and returns structured JSON
- **Error Handling**: Comprehensive exception handling with graceful degradation and fallback responses
- **Logging System**: Debug-level logging for monitoring AI interactions and troubleshooting
- **Session Management**: Basic session handling with configurable secret key

## AI Integration
- **Google Gemini API**: Primary AI service for intelligent text analysis and infographic generation
- **Structured Prompting**: Strict JSON schema enforcement ensures consistent, parseable output format
- **Professional Design Principles**: AI prompt includes visual hierarchy and layout design guidelines
- **Response Cleaning**: Regex-based JSON extraction handles inconsistent AI response formatting
- **Layout Intelligence**: AI determines optimal layout types (process_flow, concept_map, hierarchy, comparison)

## Data Flow Architecture
- **Input Processing**: User text → AI analysis → Structured JSON → Canvas visualization pipeline
- **Schema Validation**: Enforced JSON structure with title, layout, visual_flow, and sections array
- **Visual Mapping**: JSON element types and properties mapped to specific canvas drawing functions
- **Color System**: Predefined color palette (blue, green, orange, red, purple, teal) for visual consistency

# External Dependencies

## AI Services
- **Google Gemini API**: Core AI service for text-to-infographic conversion using generative AI
- **API Key Management**: Environment variable-based configuration for secure credential storage

## Frontend Libraries
- **Rough.js (v4.6.6)**: Specialized graphics library for hand-drawn style canvas rendering
- **HTML2Canvas (v1.4.1)**: Client-side image generation library for PNG export functionality
- **Google Fonts**: Patrick Hand font family for authentic handwritten typography

## Python Packages
- **Flask**: Lightweight web framework for HTTP server and request handling
- **google-genai**: Official Google Gemini API client library for AI integration
- **Standard Library**: Built-in modules for JSON processing, regex operations, and logging

## Environment Configuration
- **GEMINI_API_KEY**: Required environment variable for Google AI service authentication
- **SESSION_SECRET**: Configurable session security key with development fallback